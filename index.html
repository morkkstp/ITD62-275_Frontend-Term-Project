<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta http-equiv=Content-Type content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ระบบบันทึกการจองเต็นท์ | สำหรับพนักงาน</title>
  <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/2350/2350864.png" type="image/x-icon">

  <!-- jQuery address api thailand-->
  <link rel="stylesheet"
    href="https://earthchie.github.io/jquery.Thailand.js/jquery.Thailand.js/dist/jquery.Thailand.min.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script type="text/javascript"
    src="https://earthchie.github.io/jquery.Thailand.js/jquery.Thailand.js/dependencies/JQL.min.js"></script>
  <script type="text/javascript"
    src="https://earthchie.github.io/jquery.Thailand.js/jquery.Thailand.js/dependencies/typeahead.bundle.js"></script>
  <script type="text/javascript"
    src="https://earthchie.github.io/jquery.Thailand.js/jquery.Thailand.js/dist/jquery.Thailand.min.js"></script>

  <!-- export pdf js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.js"></script>

  <!-- sweetalert -->
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

  <!-- font Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,200;0,300;0,400;0,500;1,200;1,300;1,400&display=swap"
    rel="stylesheet">

  <!-- sweetalert 2 -->
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kanit&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Kanit', sans-serif;
    }

    .imgbg {
      /* เทสีดำ ปรับความชัด 50% */
      /* background-image: url("https://botany.wu.ac.th/wp-content/uploads/2021/03/07-1536x866.jpg"); */
      background-image: url("https://sv1.img.in.th/0CeYX.jpeg");
      /* background-size: cover;
            background-position: center;
            background-repeat: no-repeat;  */
      -webkit-background-size: cover;
      background-size: cover;
    }

    #gallery-modal .modal-img {
      width: 100%;
    }

    html {
      scroll-behavior: smooth;
    }
  </style>

  <script>
    // การโหลดข้อมูลจากไฟล์ json ไว้ในตาราง
    function body_load() {
      const url = "http://localhost:3000/campUser";

      fetch(url, { method: "GET" })
        .then((r) => { return r.json() })
        .then((res) => {
          console.log(res)

          var table = document.getElementById("tblData");

          table.innerHTML = "";

          for (var i = 0; i < res.length; i++) {
            var row = table.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
            var cell8 = row.insertCell(7);
            var cell9 = row.insertCell(8);
            var cell10 = row.insertCell(9);
            const item = res[i];
            cell1.innerHTML = item.id;
            cell2.innerHTML = item.firstname + " " + item.lastname;
            cell3.innerHTML = item.checkin;
            cell4.innerHTML = item.checkout;
            // การคำนวณระยะเวลาที่พัก
            var dateIn = new Date(item.checkin);
            var dateOut = new Date(item.checkout);
            var diffTime = dateOut.getTime() - dateIn.getTime();
            var diffDay = diffTime / (1000 * 3600 * 24);
            cell5.innerHTML = diffDay;
            cell6.innerHTML = item.zone;
            cell7.innerHTML = "<button type='button' onclick=showEquipment(" + item.id + ") class='btn btn-primary' data-bs-toggle='modal' data-bs-target='#equipment'>อุปกรณ์ที่เช่า</button>";
            // คำนวณค่าพัก
            var pz = 0;
            var t1 = 0;
            var t2 = 0;
            var t3 = 0;
            var t4 = 0;
            var t5 = 0;
            var t6 = 0;
            var t7 = 0;
            var t8 = 0;
            var t9 = 0;
            var t10 = 0;
            var t11 = 0;
            var t12 = 0;
            if (item.zone == "zone1" || item.zone == "zone2" || item.zone == "zone3" || item.zone == "zone4" || item.zone == "zone5" || item.zone == "zone6" || item.zone == "zone7" || item.zone == "zone8") {
              pz = 300 * diffDay;
            } else {
              pz = 0 * diffDay;
            }

            if (item.equipment.hanginglamp != null) {
              t1 = Number(item.equipment.hanginglamp);
            } else {
              t1 = 0;
            }

            if (item.equipment.torch != null) {
              t2 = Number(item.equipment.torch);
            } else {
              t2 = 0;
            }

            if (item.equipment.illumination != null) {
              t3 = Number(item.equipment.illumination);
            } else {
              t3 = 0;
            }

            if (item.equipment.electricity != null) {
              t4 = Number(item.equipment.electricity);
            } else {
              t4 = 0;
            }

            if (item.equipment.privateBathroom != null) {
              t5 = Number(item.equipment.privateBathroom);
            } else {
              t5 = 0;
            }

            if (item.equipment.sharedBathroom != null) {
              t6 = Number(item.equipment.sharedBathroom);
            } else {
              t6 = 0;
            }

            if (item.equipment.charCoalGrill != null) {
              t7 = Number(item.equipment.charCoalGrill);
            } else {
              t7 = 0;
            }

            if (item.equipment.electricToaster != null) {
              t8 = Number(item.equipment.electricToaster);
            } else {
              t8 = 0;
            }

            if (item.equipment.wifi != null) {
              t9 = Number(item.equipment.wifi);
            } else {
              t9 = 0;
            }

            if (item.equipment.foldingTablehigh != null) {
              t10 = Number(item.equipment.foldingTablehigh);
            } else {
              t10 = 0;
            }

            if (item.equipment.campingSleepingBag != null) {
              t11 = Number(item.equipment.campingSleepingBag);
            } else {
              t11 = 0;
            }

            if (item.equipment.foldingChair != null) {
              t12 = Number(item.equipment.foldingChair);
            } else {
              t12 = 0;
            }
            var total = Number(pz + t1 + t2 + t3 + t4 + t5 + t6 + t7 + t8 + t9 + t10 + t11 + t12);
            cell8.innerHTML = total;
            cell9.innerHTML = "<button type='button' onclick='showImagePayment(" + item.id + ")' class='btn btn-primary' data-bs-toggle='modal' data-bs-target='#showSlip'><i class='bi bi-eye-fill'></i>&nbsp;หลักฐานการโอน</button>";
            cell10.innerHTML = "<center><button class='btn btn-secondary m-1' onclick='item_edit(" + item.id + ")' data-bs-toggle='modal' data-bs-target='#editUser'><i class='bi bi-pencil-square'></i>&nbsp;แก้ไข</button>" +
              "<button class='btn btn-danger' onclick='item_dele(" + item.id + ")'><i class='bi bi-x-circle-fill'></i>&nbsp;ลบ</button></center>"
          }
        });
    }

    // แสดงการคำนวณค่าใช่จ่ายทั้งหมดในส่วนของการจอง
    function showTotalPayment() {
      var pz = 0;
      var t1 = 0;
      var t2 = 0;
      var t3 = 0;
      var t4 = 0;
      var t5 = 0;
      var t6 = 0;
      var t7 = 0;
      var t8 = 0;
      var t9 = 0;
      var t10 = 0;
      var t11 = 0;
      var t12 = 0;
      var total = 0;
      var ttp = document.getElementById('totalprice');
      var checkin = document.getElementById('checkin').value;
      var checkout = document.getElementById('checkout').value;
      var dateIn = new Date(checkin);
      var dateOut = new Date(checkout);
      var diffTime = dateOut.getTime() - dateIn.getTime();
      var diffDay = diffTime / (1000 * 3600 * 24);
      if (document.getElementById('zone1').checked || document.getElementById('zone2').checked || document.getElementById('zone3').checked || document.getElementById('zone4').checked || document.getElementById('zone5').checked || document.getElementById('zone6').checked || document.getElementById('zone7').checked || document.getElementById('zone8').checked) {
        pz = 300 * diffDay;
      } else {
        pz = 0 * diffDay;
      }

      if (document.getElementById('material1').checked) {
        t1 = 40;
      } else {
        t1 = 0;
      }

      if (document.getElementById('material2').checked) {
        t2 = 20;
      } else {
        t2 = 0;
      }

      if (document.getElementById('material3').checked) {
        t3 = 80;
      } else {
        t3 = 0;
      }

      if (document.getElementById('material4').checked) {
        t4 = 150;
      } else {
        t4 = 0;
      }

      if (document.getElementById('material5').checked) {
        t5 = 50;
      } else {
        t5 = 0;
      }

      if (document.getElementById('material6').checked) {
        t6 = 20;
      } else {
        t6 = 0;
      }

      if (document.getElementById('material7').checked) {
        t7 = 50;
      } else {
        t7 = 0;
      }

      if (document.getElementById('material8').checked) {
        t8 = 60;
      } else {
        t8 = 0;
      }

      if (document.getElementById('material9').checked) {
        t9 = 50;
      } else {
        t9 = 0;
      }

      if (document.getElementById('material10').checked) {
        t10 = 30;
      } else {
        t10 = 0;
      }

      if (document.getElementById('material11').checked) {
        t11 = 50;
      } else {
        t11 = 0;
      }

      if (document.getElementById('material12').checked) {
        t12 = 30;
      } else {
        t12 = 0;
      }
      total = pz + t1 + t2 + t3 + t4 + t5 + t6 + t7 + t8 + t9 + t10 + t11 + t12;
      ttp.textContent = total;
    }

    // แสดงการคำนวณค่าใช่จ่ายทั้งหมดในส่วนของการแก้ไข
    function showTotalPaymentEdit() {
      var pz = 0;
      var t1 = 0;
      var t2 = 0;
      var t3 = 0;
      var t4 = 0;
      var t5 = 0;
      var t6 = 0;
      var t7 = 0;
      var t8 = 0;
      var t9 = 0;
      var t10 = 0;
      var t11 = 0;
      var t12 = 0;
      var total = 0;
      var ttp = document.getElementById('edtotalprice');
      var checkin = document.getElementById('edcheckin').value;
      var checkout = document.getElementById('edcheckout').value;
      var dateIn = new Date(checkin);
      var dateOut = new Date(checkout);
      var diffTime = dateOut.getTime() - dateIn.getTime();
      var diffDay = diffTime / (1000 * 3600 * 24);
      if (document.getElementById('edzone1').checked || document.getElementById('edzone2').checked || document.getElementById('edzone3').checked || document.getElementById('edzone4').checked || document.getElementById('edzone5').checked || document.getElementById('edzone6').checked || document.getElementById('edzone7').checked || document.getElementById('edzone8').checked) {
        pz = 300 * diffDay;
      } else {
        pz = 0 * diffDay;
      }

      if (document.getElementById('edmaterial1').checked) {
        t1 = 40;
      } else {
        t1 = 0;
      }

      if (document.getElementById('edmaterial2').checked) {
        t2 = 20;
      } else {
        t2 = 0;
      }

      if (document.getElementById('edmaterial3').checked) {
        t3 = 80;
      } else {
        t3 = 0;
      }

      if (document.getElementById('edmaterial4').checked) {
        t4 = 150;
      } else {
        t4 = 0;
      }

      if (document.getElementById('edmaterial5').checked) {
        t5 = 50;
      } else {
        t5 = 0;
      }

      if (document.getElementById('edmaterial6').checked) {
        t6 = 20;
      } else {
        t6 = 0;
      }

      if (document.getElementById('edmaterial7').checked) {
        t7 = 50;
      } else {
        t7 = 0;
      }

      if (document.getElementById('edmaterial8').checked) {
        t8 = 60;
      } else {
        t8 = 0;
      }

      if (document.getElementById('edmaterial9').checked) {
        t9 = 50;
      } else {
        t9 = 0;
      }

      if (document.getElementById('edmaterial10').checked) {
        t10 = 30;
      } else {
        t10 = 0;
      }

      if (document.getElementById('edmaterial11').checked) {
        t11 = 50;
      } else {
        t11 = 0;
      }

      if (document.getElementById('edmaterial12').checked) {
        t12 = 30;
      } else {
        t12 = 0;
      }
      total = pz + t1 + t2 + t3 + t4 + t5 + t6 + t7 + t8 + t9 + t10 + t11 + t12;
      ttp.textContent = total;
    }

    // แสดงอุปกรณ์ที่เลือก
    function showEquipment(uid) {
      const url = "http://localhost:3000/campUser/" + uid;
      fetch(url, {
        method: "GET"
      }).then((r) => {
        return r.json();
      }).then((res) => {
        var refname = document.getElementById('refname');
        var relname = document.getElementById('relname');
        var re1 = document.getElementById('re1');
        var re2 = document.getElementById('re2');
        var re3 = document.getElementById('re3');
        var re4 = document.getElementById('re4');
        var re5 = document.getElementById('re5');
        var re6 = document.getElementById('re6');
        var re7 = document.getElementById('re7');
        var re8 = document.getElementById('re8');
        var re9 = document.getElementById('re9');
        var re10 = document.getElementById('re10');
        var re11 = document.getElementById('re11');
        var re12 = document.getElementById('re12');

        refname.textContent = "ชื่อ: " + res.firstname;
        relname.textContent = "นามสกุล: " + res.lastname;
        if (res.equipment.hanginglamp != null) {
          re1.textContent = "โคมไฟห้อย: " + res.equipment.hanginglamp + " บาท";
        } else {
          re1.textContent = null;
        }

        if (res.equipment.torch != null) {
          re2.textContent = "ไฟฉาย: " + res.equipment.torch + " บาท";
        } else {
          re2.textContent = null;
        }

        if (res.equipment.illumination != null) {
          re3.textContent = "ไฟส่องสว่าง: " + res.equipment.illumination + " บาท";
        } else {
          re3.textContent = null;
        }

        if (res.equipment.electricity != null) {
          re4.textContent = "ไฟฟ้า: " + res.equipment.electricity + " บาท";
        } else {
          re4.textContent = null;
        }

        if (res.equipment.privateBathroom != null) {
          re5.textContent = "ห้องน้ำส่วนตัว: " + res.equipment.privateBathroom + " บาท";
        } else {
          re5.textContent = null;
        }

        if (res.equipment.sharedBathroom != null) {
          re6.textContent = "ห้องน้ำรวม: " + res.equipment.sharedBathroom + " บาท";
        } else {
          re6.textContent = null;
        }

        if (res.equipment.charCoalGrill != null) {
          re7.textContent = "เตาปิ้งแบบถ่าน: " + res.equipment.charCoalGrill + " บาท";
        } else {
          re7.textContent = null;
        }

        if (res.equipment.electricToaster != null) {
          re8.textContent = "เตาปิ้งแบบไฟฟ้า: " + res.equipment.electricToaster + " บาท";
        } else {
          re8.textContent = null;
        }

        if (res.equipment.wifi != null) {
          re9.textContent = "WIFI: " + res.equipment.wifi + " บาท";
        } else {
          re9.textContent = null;
        }

        if (res.equipment.foldingTablehigh != null) {
          re10.textContent = "โต๊ะพับสูง: " + res.equipment.foldingTablehigh + " บาท";
        } else {
          re10.textContent = null;
        }

        if (res.equipment.campingSleepingBag != null) {
          re11.textContent = "ถุงนอนตั้งแคมป์: " + res.equipment.campingSleepingBag + " บาท";
        } else {
          re11.textContent = null;
        }

        if (res.equipment.foldingChair != null) {
          re12.textContent = "เก้าอี้พับ: " + res.equipment.foldingChair + " บาท";
        } else {
          re12.textContent = null;
        }
      })
    }

    // แสดงภาพการชำระเงิน
    function showImagePayment(uid) {
      const url = "http://localhost:3000/campUser/" + uid;
      fetch(url, {
        method: "GET"
      }).then((r) => {
        return r.json();
      }).then((res) => {
        var image = document.getElementById("image");
        var imgfname = document.getElementById('imgfname');
        var imglname = document.getElementById('imglname');
        imgfname.textContent = "ชื่อ: " + res.firstname;
        imglname.textContent = "นามสกุล: " + res.lastname;
        image.src = res.payment;
        image.width = 400;
      })
    }

    // การเพิ่มข้อมูลเข้าไปในไฟล์ json
    function btn_add_click() {
      const data = {
        "id": null,
        "firstname": document.getElementById('pfname').value,
        "lastname": document.getElementById('plname').value,
        "phonenumber": document.getElementById('pcall').value,
        "idcard": document.getElementById('pidcard').value,
        "address": document.getElementById('paddress').value,
        "subdistrict": document.getElementById('sub_district').value,
        "district": document.getElementById('district').value,
        "province": document.getElementById('province').value,
        "postcode": document.getElementById('postcode').value,
        "checkin": document.getElementById('checkin').value,
        "checkout": document.getElementById('checkout').value,
        "payment": document.getElementById('picturetransfer').value,
        "zone": (function () {
          if (document.getElementById('zone1').checked) {
            return document.getElementById('zone1').value;
          } else if (document.getElementById('zone2').checked) {
            return document.getElementById('zone2').value;
          } else if (document.getElementById('zone3').checked) {
            return document.getElementById('zone3').value;
          } else if (document.getElementById('zone4').checked) {
            return document.getElementById('zone4').value;
          } else if (document.getElementById('zone5').checked) {
            return document.getElementById('zone5').value;
          } else if (document.getElementById('zone6').checked) {
            return document.getElementById('zone6').value;
          } else if (document.getElementById('zone7').checked) {
            return document.getElementById('zone7').value;
          } else if (document.getElementById('zone8').checked) {
            return document.getElementById('zone8').value;
          }
        })(),
        "equipment": {
          "hanginglamp": (function () {
            if (document.getElementById('material1').checked) {
              return document.getElementById('material1').value;
            }
          })(),
          "torch": (function () {
            if (document.getElementById('material2').checked) {
              return document.getElementById('material2').value;
            }
          })(),
          "illumination": (function () {
            if (document.getElementById('material3').checked) {
              return document.getElementById('material3').value;
            }
          })(),
          "electricity": (function () {
            if (document.getElementById('material4').checked) {
              return document.getElementById('material4').value;
            }
          })(),
          "privateBathroom": (function () {
            if (document.getElementById('material5').checked) {
              return document.getElementById('material5').value;
            }
          })(),
          "sharedBathroom": (function () {
            if (document.getElementById('material6').checked) {
              return document.getElementById('material6').value;
            }
          })(),
          "charCoalGrill": (function () {
            if (document.getElementById('material7').checked) {
              return document.getElementById('material7').value;
            }
          })(),
          "electricToaster": (function () {
            if (document.getElementById('material8').checked) {
              return document.getElementById('material8').value;
            }
          })(),
          "wifi": (function () {
            if (document.getElementById('material9').checked) {
              return document.getElementById('material9').value;
            }
          })(),
          "foldingTablehigh": (function () {
            if (document.getElementById('material10').checked) {
              return document.getElementById('material10').value;
            }
          })(),
          "campingSleepingBag": (function () {
            if (document.getElementById('material11').checked) {
              return document.getElementById('material11').value;
            }
          })(),
          "foldingChair": (function () {
            if (document.getElementById('material12').checked) {
              return document.getElementById('material12').value;
            }
          })(),
        }
      };

      let timerInterval
      Swal.fire({
        icon: 'success',
        title: 'บันทึกข้อมูลของคุณแล้ว',
        timer: 1200,
        timerProgressBar: false,
        didOpen: () => {
          const b = Swal.getHtmlContainer().querySelector('b')
          timerInterval = setInterval(() => {
            b.textContent = Swal.getTimerLeft()
          }, 100)
        },
        willClose: () => {
          clearInterval(timerInterval)
        }
      }).then((result) => {
        /* Read more about handling dismissals below */
        if (result.dismiss === Swal.DismissReason.timer) {
          const url = "http://localhost:3000/campUser";
          fetch(url, {
            method: "POST",
            headers: {
              'Accept': 'application/json, text/plain, */*',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          }).then((r) => { return r.json() })
            .then((res) => {
              body_load();
            })
        } else if (result.dismiss !== Swal.DismissReason.timer) {
          const url = "http://localhost:3000/campUser";
          fetch(url, {
            method: "POST",
            headers: {
              'Accept': 'application/json, text/plain, */*',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          }).then((r) => { return r.json() })
            .then((res) => {
              body_load();
            })
        }
      })
    }

    // การลบข้อมูล
    function item_dele(uid) {
      Swal.fire({
        title: 'ลบข้อมูลหรือไม่?',
        text: "คุณจะเปลี่ยนกลับไม่ได้!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!'
      }).then((result) => {
        if (result.isConfirmed) {
          let timerInterval
          Swal.fire({
            icon: 'success',
            title: 'ข้อมูลของคุณถูกลบแล้ว',
            timer: 1200,
            timerProgressBar: false,
            didOpen: () => {
              const b = Swal.getHtmlContainer().querySelector('b')
              timerInterval = setInterval(() => {
                b.textContent = Swal.getTimerLeft()
              }, 100)
            },
            willClose: () => {
              clearInterval(timerInterval)
            }
          }).then((result) => {
            if (result.dismiss === Swal.DismissReason.timer) {
              const url = "http://localhost:3000/campUser/" + uid;
              fetch(url, {
                method: "DELETE"
              }).then((r) => { return r.json() })
                .then((res) => {
                  body_load();
                })
            } else if (result.dismiss !== Swal.DismissReason.timer) {
              const url = "http://localhost:3000/campUser/" + uid;
              fetch(url, {
                method: "DELETE"
              }).then((r) => { return r.json() })
                .then((res) => {
                  body_load();
                })
            }
          })
        }
      })
    }

    // แสดงการแก้ไขข้อมูล
    function item_edit(uid) {
      const url = "http://localhost:3000/campUser/" + uid;
      fetch(url, {
        method: "GET"
      }).then((r) => {
        return r.json();
      }).then((res) => {
        var user_id = document.getElementById('uid');
        var editfname = document.getElementById('edpfname');
        var editlname = document.getElementById('edplname');
        var editpnb = document.getElementById('edpcall');
        var editidcard = document.getElementById('edpidcard');
        var editaddress = document.getElementById('edpaddress');
        var editsubdistrict = document.getElementById('edsub_district');
        var editdistrict = document.getElementById('eddistrict');
        var editprovince = document.getElementById('edprovince');
        var editpostcode = document.getElementById('edpostcode');
        var editcheckin = document.getElementById('edcheckin');
        var editcheckout = document.getElementById('edcheckout');
        var editpayment = document.getElementById('edpicturetransfer');

        user_id.value = res.id;
        editfname.value = res.firstname;
        editlname.value = res.lastname;
        editpnb.value = res.phonenumber;
        editidcard.value = res.idcard;
        editaddress.value = res.address;
        editsubdistrict.value = res.subdistrict;
        editdistrict.value = res.district;
        editprovince.value = res.province;
        editpostcode.value = res.postcode;
        editcheckin.value = res.checkin;
        editcheckout.value = res.checkout;
        editpayment.image = res.payment;

        if (res.zone == "zone1") {
          var editzone = document.getElementById('edzone1');
          var edzonecal = document.getElementById('edzone1').checked;
        } else if (res.zone == "zone2") {
          var editzone = document.getElementById('edzone2');
          var edzonecal = document.getElementById('edzone2').checked;
        } else if (res.zone == "zone3") {
          var editzone = document.getElementById('edzone3');
          var edzonecal = document.getElementById('edzone3').checked;
        } else if (res.zone == "zone4") {
          var editzone = document.getElementById('edzone4');
          var edzonecal = document.getElementById('edzone4').checked;
        } else if (res.zone == "zone5") {
          var editzone = document.getElementById('edzone5');
          var edzonecal = document.getElementById('edzone5').checked;
        } else if (res.zone == "zone6") {
          var editzone = document.getElementById('edzone6');
          var edzonecal = document.getElementById('edzone6').checked;
        } else if (res.zone == "zone7") {
          var editzone = document.getElementById('edzone7');
          var edzonecal = document.getElementById('edzone7').checked;
        } else if (res.zone == "zone8") {
          var editzone = document.getElementById('edzone8');
          var edzonecal = document.getElementById('edzone8').checked;
        }
        editzone.checked = res.zone;

        if (document.getElementById('edmaterial1')) {
          var editmaterial1 = document.getElementById('edmaterial1');
          editmaterial1.checked = res.equipment.hanginglamp;
        }

        if (document.getElementById('edmaterial2')) {
          var editmaterial2 = document.getElementById('edmaterial2');
          editmaterial2.checked = res.equipment.torch;
        }

        if (document.getElementById('edmaterial3')) {
          var editmaterial3 = document.getElementById('edmaterial3');
          editmaterial3.checked = res.equipment.illumination;
        }

        if (document.getElementById('edmaterial4')) {
          var editmaterial4 = document.getElementById('edmaterial4');
          editmaterial4.checked = res.equipment.electricity;
        }

        if (document.getElementById('edmaterial5')) {
          var editmaterial5 = document.getElementById('edmaterial5');
          editmaterial5.checked = res.equipment.privateBathroom;
        }

        if (document.getElementById('edmaterial6')) {
          var editmaterial6 = document.getElementById('edmaterial6');
          editmaterial6.checked = res.equipment.sharedBathroom;
        }

        if (document.getElementById('edmaterial7')) {
          var editmaterial7 = document.getElementById('edmaterial7');
          editmaterial7.checked = res.equipment.charCoalGrill;
        }

        if (document.getElementById('edmaterial8')) {
          var editmaterial8 = document.getElementById('edmaterial8');
          editmaterial8.checked = res.equipment.electricToaster;
        }

        if (document.getElementById('edmaterial9')) {
          var editmaterial9 = document.getElementById('edmaterial9');
          editmaterial9.checked = res.equipment.wifi;
        }

        if (document.getElementById('edmaterial10')) {
          var editmaterial10 = document.getElementById('edmaterial10');
          editmaterial10.checked = res.equipment.foldingTablehigh;
        }

        if (document.getElementById('edmaterial11')) {
          var editmaterial11 = document.getElementById('edmaterial11');
          editmaterial11.checked = res.equipment.campingSleepingBag;
        }

        if (document.getElementById('edmaterial12')) {
          var editmaterial12 = document.getElementById('edmaterial12');
          editmaterial12.checked = res.equipment.foldingChair;
        }

        var pz = 0;
        var t1 = 0;
        var t2 = 0;
        var t3 = 0;
        var t4 = 0;
        var t5 = 0;
        var t6 = 0;
        var t7 = 0;
        var t8 = 0;
        var t9 = 0;
        var t10 = 0;
        var t11 = 0;
        var t12 = 0;
        var total = 0;
        var ttp = document.getElementById('edtotalprice');
        var checkin = document.getElementById('edcheckin').value;
        var checkout = document.getElementById('edcheckout').value;
        var dateIn = new Date(checkin);
        var dateOut = new Date(checkout);
        var diffTime = dateOut.getTime() - dateIn.getTime();
        var diffDay = diffTime / (1000 * 3600 * 24);
        if (document.getElementById('edzone1').checked || document.getElementById('edzone2').checked || document.getElementById('edzone3').checked || document.getElementById('edzone4').checked || document.getElementById('edzone5').checked || document.getElementById('edzone6').checked || document.getElementById('edzone7').checked || document.getElementById('edzone8').checked) {
          pz = 300 * diffDay;
        } else {
          pz = 0 * diffDay;
        }

        if (document.getElementById('edmaterial1').checked) {
          t1 = 40;
        } else {
          t1 = 0;
        }

        if (document.getElementById('edmaterial2').checked) {
          t2 = 20;
        } else {
          t2 = 0;
        }

        if (document.getElementById('edmaterial3').checked) {
          t3 = 80;
        } else {
          t3 = 0;
        }

        if (document.getElementById('edmaterial4').checked) {
          t4 = 150;
        } else {
          t4 = 0;
        }

        if (document.getElementById('edmaterial5').checked) {
          t5 = 50;
        } else {
          t5 = 0;
        }

        if (document.getElementById('edmaterial6').checked) {
          t6 = 20;
        } else {
          t6 = 0;
        }

        if (document.getElementById('edmaterial7').checked) {
          t7 = 50;
        } else {
          t7 = 0;
        }

        if (document.getElementById('edmaterial8').checked) {
          t8 = 60;
        } else {
          t8 = 0;
        }

        if (document.getElementById('edmaterial9').checked) {
          t9 = 50;
        } else {
          t9 = 0;
        }

        if (document.getElementById('edmaterial10').checked) {
          t10 = 30;
        } else {
          t10 = 0;
        }

        if (document.getElementById('edmaterial11').checked) {
          t11 = 50;
        } else {
          t11 = 0;
        }

        if (document.getElementById('edmaterial12').checked) {
          t12 = 30;
        } else {
          t12 = 0;
        }
        total = pz + t1 + t2 + t3 + t4 + t5 + t6 + t7 + t8 + t9 + t10 + t11 + t12;
        ttp.textContent = total;
      })
    }

    // การบันทึกข้อมูล
    function btn_save_click() {
      var uid = document.getElementById('uid').value;
      const data = {
        "id": uid,
        "firstname": document.getElementById('edpfname').value,
        "lastname": document.getElementById('edplname').value,
        "phonenumber": document.getElementById('edpcall').value,
        "idcard": document.getElementById('edpidcard').value,
        "address": document.getElementById('edpaddress').value,
        "subdistrict": document.getElementById('edsub_district').value,
        "district": document.getElementById('eddistrict').value,
        "province": document.getElementById('edprovince').value,
        "postcode": document.getElementById('edpostcode').value,
        "checkin": document.getElementById('edcheckin').value,
        "checkout": document.getElementById('edcheckout').value,
        "payment": document.getElementById('edpicturetransfer').value,
        "zone": (function () {
          if (document.getElementById('edzone1').checked) {
            return document.getElementById('edzone1').value;
          } else if (document.getElementById('edzone2').checked) {
            return document.getElementById('edzone2').value;
          } else if (document.getElementById('edzone3').checked) {
            return document.getElementById('edzone3').value;
          } else if (document.getElementById('edzone4').checked) {
            return document.getElementById('edzone4').value;
          } else if (document.getElementById('edzone5').checked) {
            return document.getElementById('edzone5').value;
          } else if (document.getElementById('edzone6').checked) {
            return document.getElementById('edzone6').value;
          } else if (document.getElementById('edzone7').checked) {
            return document.getElementById('edzone7').value;
          } else if (document.getElementById('edzone8').checked) {
            return document.getElementById('edzone8').value;
          }
        })(),
        "equipment": {
          "hanginglamp": (function () {
            if (document.getElementById('edmaterial1').checked) {
              return document.getElementById('edmaterial1').value;
            }
          })(),
          "torch": (function () {
            if (document.getElementById('edmaterial2').checked) {
              return document.getElementById('edmaterial2').value;
            }
          })(),
          "illumination": (function () {
            if (document.getElementById('edmaterial3').checked) {
              return document.getElementById('edmaterial3').value;
            }
          })(),
          "electricity": (function () {
            if (document.getElementById('edmaterial4').checked) {
              return document.getElementById('edmaterial4').value;
            }
          })(),
          "privateBathroom": (function () {
            if (document.getElementById('edmaterial5').checked) {
              return document.getElementById('edmaterial5').value;
            }
          })(),
          "sharedBathroom": (function () {
            if (document.getElementById('edmaterial6').checked) {
              return document.getElementById('edmaterial6').value;
            }
          })(),
          "charCoalGrill": (function () {
            if (document.getElementById('edmaterial7').checked) {
              return document.getElementById('edmaterial7').value;
            }
          })(),
          "electricToaster": (function () {
            if (document.getElementById('edmaterial8').checked) {
              return document.getElementById('edmaterial8').value;
            }
          })(),
          "wifi": (function () {
            if (document.getElementById('edmaterial9').checked) {
              return document.getElementById('edmaterial9').value;
            }
          })(),
          "foldingTablehigh": (function () {
            if (document.getElementById('edmaterial10').checked) {
              return document.getElementById('edmaterial10').value;
            }
          })(),
          "campingSleepingBag": (function () {
            if (document.getElementById('edmaterial11').checked) {
              return document.getElementById('edmaterial11').value;
            }
          })(),
          "foldingChair": (function () {
            if (document.getElementById('edmaterial12').checked) {
              return document.getElementById('edmaterial12').value;
            }
          })(),
        }
      };

      let timerInterval
      Swal.fire({
        icon: 'success',
        title: 'แก้ไขข้อมูลของคุณแล้ว',
        timer: 1200,
        timerProgressBar: false,
        didOpen: () => {
          const b = Swal.getHtmlContainer().querySelector('b')
          timerInterval = setInterval(() => {
            b.textContent = Swal.getTimerLeft()
          }, 100)
        },
        willClose: () => {
          clearInterval(timerInterval)
        }
      }).then((result) => {
        /* Read more about handling dismissals below */
        if (result.dismiss === Swal.DismissReason.timer) {
          const url = "http://localhost:3000/campUser/" + uid;
          console.log(url);
          fetch(url, {
            method: "PUT",
            headers: {
              'Accept': 'application/json, text/plain, */*',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          }).then((r) => { return r.json() })
            .then((res) => {
              body_load();
            })
        } else if (result.dismiss !== Swal.DismissReason.timer) {
          const url = "http://localhost:3000/campUser/" + uid;
          console.log(url);
          fetch(url, {
            method: "PUT",
            headers: {
              'Accept': 'application/json, text/plain, */*',
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          }).then((r) => { return r.json() })
            .then((res) => {
              body_load();
            })
        }
      })
    }
  </script>
</head>

<body onload="body_load()">
  <!-- แถบ navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">บันทึกการจองเต็นท์</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="#">การจองเต็นท์</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="#two">รูปภาพ</a>
          </li> -->
          <li class="nav-item">
            <a class="nav-link" href="#three">ตารางข้อมูลการจองเต็นท์</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ส่วนของการจองเต็นท์ -->
  <section id="one" style="margin-top: 50px;">
    <div class="imgbg">
      <div class="container">
        <div class="row">
          <div class="col-md-6 d-flex align-items-center" style="color: white;">
            <div style="margin-top: 30px;">
              <h1>ระบบบันทึกการจองเต็นท์</h1>
              <h4>สำหรับพนักงาน</h4>
            </div>
          </div>
          <div class="col-md-6 mt-4">
            <div class="card mb-4 shadow-lg p-3 mb-5 bg-body-tertiary rounded">
              <div class="card-body">
                <div class="container">
                  <div class="row">
                    <div class="col-md-12 mb-3">
                      <h3 class="text-center">การจองเต็นท์</h3>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <label for="checkin" class="form-label"><b>เช็คอิน</b></label>
                      <input type="date" class="form-control rounded-pill" id="checkin" onchange="showTotalPayment()">
                    </div>
                    <div class="col-md-6">
                      <label for="checkout" class="form-label"><b>เช็คเอ้าท์</b></label>
                      <input type="date" class="form-control rounded-pill" id="checkout" onchange="showTotalPayment()">
                    </div>
                  </div><br>
                  <div class="row">
                    <div class="accordion" id="accordionExample">
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                          <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            เลือกจุดกางเต็นท์
                          </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                          data-bs-parent="#accordionExample">
                          <div class="accordion-body">
                            <div class="p-2 mb-2 bg-danger text-white text-center">
                              <h5>โปรโมชั่นฉลองปีใหม่ ทุกโซนราคาเดียว 300 บาท</h5>
                            </div>
                            <div class="d-flex justify-content-center">
                              <img src="https://sv1.img.in.th/029vO.jpeg" class="gallery-item"
                                style="width: 75%; border-radius: 6px;">

                              <!-- Source Code for Full Image Modal -->
                              <script>
                                document.addEventListener("click", function (e) {
                                  if (e.target.classList.contains("gallery-item")) {
                                    const src = e.target.getAttribute("src");
                                    document.querySelector(".modal-img").src = src;
                                    const myModal = new bootstrap.Modal(document.getElementById('gallery-modal'));
                                    myModal.show();
                                  }
                                })
                              </script>

                            </div>
                            <div class="container mt-3">
                              <div class="row">
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone1"
                                      value="zone1" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 1
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone2"
                                      value="zone2" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 2
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone3"
                                      value="zone3" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 3
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone4"
                                      value="zone4" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 4
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone5"
                                      value="zone5" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 5
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone6"
                                      value="zone6" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 6
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone7"
                                      value="zone7" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 7
                                    </label>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="zone8"
                                      value="zone8" onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexRadioDefault1">
                                      โซน 8
                                    </label>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="headingfour">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapsefour" aria-expanded="false" aria-controls="collapsefour">
                            ข้อมูลผู้จอง
                          </button>
                        </h2>
                        <div id="collapsefour" class="accordion-collapse collapse" aria-labelledby="headingfour"
                          data-bs-parent="#accordionExample">
                          <div class="accordion-body">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">ชื่อ</label>
                                  <input type="text" class="form-control rounded-pill" id="pfname" placeholder="ชื่อ">
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">นามสกุล</label>
                                  <input type="text" class="form-control rounded-pill" id="plname"
                                    placeholder="นามสกุล">
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">เบอร์โทร</label>
                                  <input type="text" class="form-control rounded-pill" id="pcall"
                                    placeholder="เบอร์โทร">
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">รหัสบัตรประชาชน</label>
                                  <input type="number" class="form-control rounded-pill" id="pidcard"
                                    placeholder="รหัสบัตรประชาชน">
                                </div>
                              </div>
                              <div class="col-md-12">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">ที่อยู่</label>
                                  <input type="text" class="form-control rounded-pill" id="paddress"
                                    placeholder="ที่อยู่">
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">ตำบล</label>
                                  <input type="text" class="form-control rounded-pill" id="sub_district"
                                    placeholder="ตำบล">
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">อำเภอ</label>
                                  <input type="text" class="form-control rounded-pill" id="district"
                                    placeholder="อำเภอ">
                                </div>
                              </div>
                              <div class="col-md-8">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">จังหวัด</label>
                                  <input type="text" class="form-control rounded-pill" id="province"
                                    placeholder="จังหวัด">
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="mb-3">
                                  <label for="exampleFormControlInput1" class="form-label">รหัสไปรษณีย์</label>
                                  <input type="text" class="form-control rounded-pill" id="postcode"
                                    placeholder="รหัสไปรษณีย์">
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            เลือกอุปกรณ์อำนวยความสะดวก (เช่าต่อครั้ง)
                          </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                          data-bs-parent="#accordionExample">
                          <div class="accordion-body">
                            <div class="container mt-3">
                              <div class="row">
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="40" id="material1"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      โคมไฟห้อย
                                    </label>
                                    <p>
                                      <font color="red">40 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="20" id="material2"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      ไฟฉาย
                                    </label>
                                    <p>
                                      <font color="red">20 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="80" id="material3"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      ไฟส่องสว่าง
                                    </label>
                                    <p>
                                      <font color="red">80 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="150" id="material4"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      ไฟฟ้า
                                    </label>
                                    <p>
                                      <font color="red">150 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="50" id="material5"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      ห้องน้ำ ส่วนตัว
                                    </label>
                                    <p>
                                      <font color="red">50 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="20" id="material6"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      ห้องน้ำ รวม
                                    </label>
                                    <p>
                                      <font color="red">20 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="50" id="material7"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      เตาปิ้ง แบบถ่าน
                                    </label>
                                    <p>
                                      <font color="red">50 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="60" id="material8"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      เตาปิ้ง แบบไฟฟ้า
                                    </label>
                                    <p>
                                      <font color="red">60 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="50" id="material9"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      WIFI
                                    </label>
                                    <p>
                                      <font color="red">50 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="30" id="material10"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      โต๊ะพับ สูง
                                    </label>
                                    <p>
                                      <font color="red">30 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="50" id="material11"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      ถุงนอนตั้งแคมป์
                                    </label>
                                    <p>
                                      <font color="red">50 บาท</font>
                                    </p>
                                  </div>
                                </div>
                                <div class="col-sm-6 mycols">
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="30" id="material12"
                                      onchange="showTotalPayment()">
                                    <label class="form-check-label" for="flexCheckDefault">
                                      เก้าอี้พับ
                                    </label>
                                    <p>
                                      <font color="red">30 บาท</font>
                                    </p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            การชำระเงิน
                          </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                          data-bs-parent="#accordionExample">
                          <div class="accordion-body">
                            <div class="container mt-3">
                              <div class="row">
                                <div class="col-md-6">
                                  <h4>รวมเป็นเงินทั้งสิ้น</h4>
                                </div>
                                <div class="col-md-6">
                                  <h4 class="text-center">
                                    <font color="#02DD27"><span id="totalprice">0</span>
                                    </font>
                                    <font>บาท</font>
                                  </h4>
                                </div>
                              </div>
                              <div class="div2" id="div2">
                                <hr>
                                <h3 class="text-center">
                                  <font color="#0327A1">
                                    <b>จ่ายค่าเช่า</b>
                                  </font>
                                </h3>
                                <div class="d-flex justify-content-center">
                                  <img src="https://sv1.img.in.th/0Wxlt.jpeg" class="gallery-item2" alt="" srcset=""
                                    style="width: 75%; border-radius: 6px;">
                                </div>

                                <!-- Source Code for Full Image Modal -->
                                <script>
                                  document.addEventListener("click", function (e) {
                                    if (e.target.classList.contains("gallery-item2")) {
                                      const src = e.target.getAttribute("src");
                                      document.querySelector(".modal-img2").src = src;
                                      const myModal = new bootstrap.Modal(document.getElementById('gallery-modal2'));
                                      myModal.show();
                                    }
                                  })
                                </script>

                                <label for="exampleFormControlInput1" class="form-label mt-3">หลักฐานการโอนเงิน</label>
                                <input type="file" class="form-control mb-3 rounded-pill" id="selectAvatar" required>
                                <img class="img" id="avatar" alt="" srcset="" style="width: 75%; border-radius: 6px;">
                                <textarea id="picturetransfer" rows="30" cols="50" hidden></textarea>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div><br>
                  <div class="d-flex justify-content-center">
                    <button type="button" class="btn btn-primary rounded-pill"
                      onclick="btn_add_click()">ยืนยันการจอง</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <hr>

  <!-- ส่วนของการแสดงรูปภาพ -->
  <section id="two">
    <div class="container-fluid mb-3 mt-3">
      <div id="carouselExampleCaptions" class="carousel slide">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
            aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
            aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
            aria-label="Slide 3"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="3"
            aria-label="Slide 4"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="4"
            aria-label="Slide 0"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="https://sv1.img.in.th/EwyaX.jpeg" class="d-block w-100" alt="...">
            <!-- <div class="carousel-caption d-none d-md-block">
              <h5>First slide label</h5>
              <p>Some representative placeholder content for the first slide.</p>
            </div> -->
          </div>
          <div class="carousel-item">
            <img src="https://sv1.img.in.th/ESExw.jpeg" class="d-block w-100" alt="...">
            <!-- <div class="carousel-caption d-none d-md-block">
              <h5>Second slide label</h5>
              <p>Some representative placeholder content for the second slide.</p>
            </div> -->
          </div>
          <div class="carousel-item">
            <img src="https://sv1.img.in.th/ES0rJ.jpeg" class="d-block w-100" alt="...">
            <!-- <div class="carousel-caption d-none d-md-block">
              <h5>Third slide label</h5>
              <p>Some representative placeholder content for the third slide.</p>
            </div> -->
          </div>
          <div class="carousel-item">
            <img src="https://sv1.img.in.th/ESCty.jpeg" class="d-block w-100" alt="...">
            <!-- <div class="carousel-caption d-none d-md-block">
              <h5>Third slide label</h5>
              <p>Some representative placeholder content for the third slide.</p>
            </div> -->
          </div>
          <div class="carousel-item">
            <img src="https://sv1.img.in.th/ESTVz.jpeg" class="d-block w-100" alt="...">
            <!-- <div class="carousel-caption d-none d-md-block">
              <h5>Third slide label</h5>
              <p>Some representative placeholder content for the third slide.</p>
            </div> -->
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
          data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">ย้อนกลับ</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
          data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">ถัดไป</span>
        </button>
      </div>
    </div>
  </section>

  <!-- ส่วนของการแสดงตารางการจองเต็นท์ -->
  <section id="three">
    <div class="card">
      <div class="card-body">
        <div class="p-3 mb-2text-white" style="background-color: #d5ff86;">
          <h2 class="text-center">ตารางข้อมูลการจองเต็นท์</h2>
        </div>
        <div class="container mt-3">
          <h6 class="text-center">ดาวน์โหลดฐานข้อมูล
            <button type="button" class="btn btn-success" id="expor_tButton_excel">ไฟล์ Excel</button>&nbsp;&nbsp;
            <!-- <button type="button" class="btn btn-primary" id="expor_tButton_pdf">ไฟล์ PDF</button> -->
          </h6>
        </div>
        <div class="container table-responsive">
          <table id="exportTable" class="table table-striped table-hover mt-2" cellspacing="0" width="100%"
            aria-describedby="example_info" role="grid" style="width: 100%;">
            <thead>
              <tr>
                <th scope="col">ลำดับ</th>
                <th scope="col">ข้อมูลผู้จอง</th>
                <th scope="col">วันที่จอง</th>
                <th scope="col">วันที่ออก</th>
                <th scope="col">จำนวนวัน</th>
                <th scope="col">โซนที่เช่า</th>
                <th scope="col">อุปกรณ์เสริม</th>
                <th scope="col">รวมเป็นเงิน</th>
                <th scope="col">หลักฐานการโอนเงิน</th>
                <th scope="col">แก้ไข & ลบ</th>
              </tr>
            </thead>
            <tbody id="tblData"></tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center text-lg-start bg-dark text-light">
    <div class="text-center p-4">
      &copy; 2023 Copyright | ITD#3
    </div>
  </footer>

  <!-- Modal สำหรับการแสดงรูปภาพของโซนต่างๆในการจองเต็นท์ -->
  <div class="modal fade" id="gallery-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">รูปภาพโซนต่างๆของจุดกางเต็นท์</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-center">
            <img src="https://sv1.img.in.th/029vO.jpeg" class="modal-img" style="width: 100%; border-radius: 6px;">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal สำหรับการแสดงรูปภาพของการโอนเงิน -->
  <div class="modal fade" id="gallery-modal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">รูปภาพโซนต่างๆของจุดกางเต็นท์</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-center">
            <img src="https://sv1.img.in.th/0Wxlt.jpeg" class="modal-img2" style="width: 80%; border-radius: 6px;">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal สำหรับแสดงการเช่าอุปกรณ์อำนวยความสะดวก -->
  <div class="modal fade" id="equipment" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">อุปกรณ์ที่ยืม</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div>
            <span id="refname"></span>
            <span id="relname"></span>
          </div>
          <div>
            <span id="re1"></span>
          </div>
          <div>
            <span id="re2"></span>
          </div>
          <div>
            <span id="re3"></span>
          </div>
          <div>
            <span id="re4"></span>
          </div>
          <div>
            <span id="re5"></span>
          </div>
          <div>
            <span id="re6"></span>
          </div>
          <div>
            <span id="re7"></span>
          </div>
          <div>
            <span id="re8"></span>
          </div>
          <div>
            <span id="re9"></span>
          </div>
          <div>
            <span id="re10"></span>
          </div>
          <div>
            <span id="re11"></span>
          </div>
          <div>
            <span id="re12"></span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal สำหรับแสดงหลักฐานการโอนเงิน -->
  <div class="modal fade" id="showSlip" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">หลักฐานการโอน</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <span id="imgfname"></span>
            <span id="imglname"></span>
          </div>
          <div class="d-flex justify-content-center">
            <img id="image">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal สำหรับแสดงการแก้ไขข้อมูลต่างๆของผู้เช่าเต็นท์ -->
  <div class="modal fade" id="editUser" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">แก้ไขข้อมูล</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="uid">
          <div class="card-body">
            <div class="accordion-body">
              <div class="row">
                <div class="col-md-12">
                  <div class="mb-3">
                    <h5 class="text-center">ข้อมูลผู้จอง</h5>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">ชื่อ</label>
                    <input type="text" class="form-control rounded-pill" id="edpfname" placeholder="ชื่อ">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">นามสกุล</label>
                    <input type="text" class="form-control rounded-pill" id="edplname" placeholder="นามสกุล">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">เบอร์โทร</label>
                    <input type="text" class="form-control rounded-pill" id="edpcall" placeholder="เบอร์โทร">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">รหัสบัตรประชาชน</label>
                    <input type="number" class="form-control rounded-pill" id="edpidcard" placeholder="รหัสบัตรประชาชน">
                  </div>
                </div>
                <div class="col-md-12">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">ที่อยู่</label>
                    <input type="text" class="form-control rounded-pill" id="edpaddress" placeholder="ที่อยู่">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">ตำบล</label>
                    <input type="text" class="form-control rounded-pill" id="edsub_district" placeholder="ตำบล">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">อำเภอ</label>
                    <input type="text" class="form-control rounded-pill" id="eddistrict" placeholder="อำเภอ">
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">จังหวัด</label>
                    <input type="text" class="form-control rounded-pill" id="edprovince" placeholder="จังหวัด">
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">รหัสไปรษณีย์</label>
                    <input type="text" class="form-control rounded-pill" id="edpostcode" placeholder="รหัสไปรษณีย์">
                  </div>
                </div>
                <hr><br>
                <div class="col-md-12">
                  <div class="mb-3">
                    <h5 class="text-center">เลือกจุดกางเต็นท์กับวันและเวลา</h5>
                  </div>
                </div>
                <div class="col-md-6">
                  <label for="checkin" class="form-label">เช็คอิน</label>
                  <input type="date" class="form-control rounded-pill" id="edcheckin" onchange="showTotalPaymentEdit()">
                </div>
                <div class="col-md-6">
                  <label for="checkout" class="form-label">เช็คเอ้าท์</label>
                  <input type="date" class="form-control rounded-pill" id="edcheckout"
                    onchange="showTotalPaymentEdit()">
                </div>
              </div><br>
              <div class="d-flex justify-content-center">
                <img src="https://sv1.img.in.th/029vO.jpeg" style="width: 75%; border-radius: 6px;">
              </div><br>
              <div class="row">
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone1" value="zone1"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 1
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone2" value="zone2"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 2
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone3" value="zone3"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 3
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone4" value="zone4"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 4
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone5" value="zone5"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 5
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone6" value="zone6"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 6
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone7" value="zone7"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 7
                    </label>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="edradio" id="edzone8" value="zone8"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexRadioDefault1">
                      โซน 8
                    </label>
                  </div>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-md-12">
                  <div class="mb-3">
                    <h5 class="text-center">เลือกอุปกรณ์อำนวยความสะดวก(เช่าต่อครั้ง)</h5>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="40" id="edmaterial1"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      โคมไฟห้อย
                    </label>
                    <p>
                      <font color="red">40 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="20" id="edmaterial2"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      ไฟฉาย
                    </label>
                    <p>
                      <font color="red">20 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="80" id="edmaterial3"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      ไฟส่องสว่าง
                    </label>
                    <p>
                      <font color="red">80 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="150" id="edmaterial4"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      ไฟฟ้า
                    </label>
                    <p>
                      <font color="red">150 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="50" id="edmaterial5"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      ห้องน้ำ ส่วนตัว
                    </label>
                    <p>
                      <font color="red">50 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="20" id="edmaterial6"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      ห้องน้ำ รวม
                    </label>
                    <p>
                      <font color="red">20 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="50" id="edmaterial7"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      เตาปิ้ง แบบถ่าน
                    </label>
                    <p>
                      <font color="red">50 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="60" id="edmaterial8"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      เตาปิ้ง แบบไฟฟ้า
                    </label>
                    <p>
                      <font color="red">60 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="50" id="edmaterial9"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      WIFI
                    </label>
                    <p>
                      <font color="red">50 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="30" id="edmaterial10"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      โต๊ะพับ สูง
                    </label>
                    <p>
                      <font color="red">30 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="50" id="edmaterial11"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      ถุงนอนตั้งแคมป์
                    </label>
                    <p>
                      <font color="red">50 บาท
                      </font>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="30" id="edmaterial12"
                      onchange="showTotalPaymentEdit()">
                    <label class="form-check-label" for="flexCheckDefault">
                      เก้าอี้พับ
                    </label>
                    <p>
                      <font color="red">30 บาท
                      </font>
                    </p>
                  </div>
                </div>
              </div>
              <hr>
              <div class="div2" id="div2">
                <div class="row">
                  <div class="col-md-6">
                    <h4>รวมเป็นเงินทั้งสิ้น</h4>
                  </div>
                  <div class="col-md-6">
                    <h4 class="text-center">
                      <font color="#02DD27"><span id="edtotalprice">0</span>
                      </font>
                      <font>บาท</font>
                    </h4>
                  </div>
                </div><br>
                <div class="d-flex justify-content-center">
                  <img src="https://sv1.img.in.th/0Wxlt.jpeg" alt="" srcset="" style="width: 75%; border-radius: 6px;">
                </div>
                <label for="exampleFormControlInput1" class="form-label mt-3">หลักฐานการโอนเงิน</label>
                <input type="file" class="form-control mb-3 rounded-pill" id="edselectAvatar" required>
                <img class="img" id="edavatar" alt="" srcset="" style="width: 75%; border-radius: 6px;">
                <textarea id="edpicturetransfer" rows="30" cols="50" hidden></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
          <button type="button" class="btn btn-success" onclick="btn_save_click()">บันทึกการแก้ไข</button>
        </div>
      </div>
    </div>
  </div>

  <!-- script ของฟังก์ชันต่างๆ -->
  <script>
    // Jquery Select Address
    $.Thailand({
      $district: $("#sub_district"), // input ของตำบล
      $amphoe: $("#district"), // input ของอำเภอ
      $province: $("#province"), // input ของจังหวัด
      $zipcode: $("#postcode") // input ของรหัสไปรษณีย์
    });

    // img to base64
    const input = document.getElementById("selectAvatar");
    const avatar = document.getElementById("avatar");
    const textArea = document.getElementById("picturetransfer");

    const convertBase64 = (file) => {
      return new Promise((resolve, reject) => {
        const fileReader = new FileReader();
        fileReader.readAsDataURL(file);

        fileReader.onload = () => {
          resolve(fileReader.result);
        };

        fileReader.onerror = (error) => {
          reject(error);
        };
      });
    };

    const uploadImage = async (event) => {
      const file = event.target.files[0];
      const base64 = await convertBase64(file);
      avatar.src = base64;
      textArea.innerText = base64;
    };

    input.addEventListener("change", (e) => {
      uploadImage(e);
    });
  </script>

  <script>
    // img to base 64 For Edit
    const edinput = document.getElementById("edselectAvatar");
    const edavatar = document.getElementById("edavatar");
    const edtextArea = document.getElementById("edpicturetransfer");

    const convertBase64Edit = (file) => {
      return new Promise((resolve, reject) => {
        const fileReader2 = new FileReader();
        fileReader2.readAsDataURL(file);

        fileReader2.onload = () => {
          resolve(fileReader2.result);
        };

        fileReader2.onerror = (error) => {
          reject(error);
        };
      });
    };

    const eduploadImage = async (event) => {
      const file = event.target.files[0];
      const base64 = await convertBase64Edit(file);
      edavatar.src = base64;
      edtextArea.innerText = base64;
    };

    edinput.addEventListener("change", (e) => {
      eduploadImage(e);
    });
  </script>


  <script>
    // tabel to csv
    document.getElementById("export-button").addEventListener("click", exportToCsv);
    function exportToCsv() {
      var csv = [];
      var rows = document.querySelectorAll("table tr");
      for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td, th");
        for (var j = 0; j < cols.length; j++)
          row.push(cols[j].innerText);
        csv.push(row.join(","));
      }
      downloadCSV(csv.join("\n"), "ฐานข้อมูลการจองแคมป์.csv");
    }
    function downloadCSV(csv, filename) {
      var csvFile;
      var downloadLink;
      csvFile = new Blob([csv], { type: "text/csv" });
      downloadLink = document.createElement("a");
      downloadLink.download = filename;
      downloadLink.href = window.URL.createObjectURL(csvFile);
      downloadLink.style.display = "none";
      document.body.appendChild(downloadLink);
      downloadLink.click();
    }    
  </script>

  <script>
    function export_button_pdf() {
      var doc = new jspdf.jsPDF('landscape')
      doc.autoTable({
        html: '#table',
        theme: 'grid',
        styles: { overflow: 'linebreak' },
        columnStyles: { email: { columnWidth: 'wrap' } },
        margin: { top: 20 },
        beforePageContent: function (data) {
          doc.text("ฐานข้อมูลการจองแคมป์", 14, 15)
        }
      })
      doc.save('ฐานข้อมูลการจองแคมป์.pdf')
    }
  </script>

  <!-- you need to include the shieldui css and js assets in order for the components to work -->
  <link rel="stylesheet" type="text/css"
    href="http://www.shieldui.com/shared/components/latest/css/light/all.min.css" />
  <script type="text/javascript" src="http://www.shieldui.com/shared/components/latest/js/shieldui-all.min.js"></script>
  <script type="text/javascript" src="http://www.shieldui.com/shared/components/latest/js/jszip.min.js"></script>

  <!-- ส่วนนี้เป็นส่วนที่ใช้สำหรับการส่งออกข้อมูลในตารางเป็นไฟล์ excel -->
  <script type="text/javascript">
    jQuery(function ($) {
      $("#expor_tButton_excel").click(function () {
        // parse the HTML table element having an id=exportTable
        var dataSource = shield.DataSource.create({
          data: "#exportTable",
          schema: {
            type: "table",
            fields: {
              ลำดับ: { type: Number },
              ข้อมูลผู้จอง: { type: String },
              วันที่จอง: { type: String },
              วันที่ออก: { type: String },
              จำนวนวัน: { type: String },
              โซนที่เช่า: { type: String },
              รวมเป็นเงิน: { type: String }
            }
          }
        });

        // when parsing is done, export the data to Excel
        dataSource.read().then(function (data) {
          new shield.exp.OOXMLWorkbook({
            author: "ฐานข้อมูลการจองแคมป์",
            worksheets: [
              {
                name: "ฐานข้อมูลการจองแคมป์",
                rows: [
                  {
                    cells: [
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "ลำดับ"
                      },
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "ข้อมูลผู้จอง"
                      },
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "วันที่จอง"
                      },
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "วันที่ออก"
                      },
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "จำนวนวัน"
                      },
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "โซนที่เช่า"
                      },
                      {
                        style: {
                          bold: true
                        },
                        type: String,
                        value: "รวมเป็นเงิน"
                      }
                    ]
                  }
                ].concat($.map(data, function (item) {
                  return {
                    cells: [
                      { type: Number, value: item.ลำดับ },
                      { type: String, value: item.ข้อมูลผู้จอง },
                      { type: String, value: item.วันที่จอง },
                      { type: String, value: item.วันที่ออก },
                      { type: String, value: item.จำนวนวัน },
                      { type: String, value: item.โซนที่เช่า },
                      { type: String, value: item.รวมเป็นเงิน }

                    ]
                  };
                }))
              }
            ]
          }).saveAs({
            fileName: "ฐานข้อมูลการจองแคมป์ " + "ดาวน์โหลดวันที่ " + new Date().toLocaleDateString()
          })
        });
      });
    });
  </script>
</body>

</html>